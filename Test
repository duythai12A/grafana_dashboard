- name: Quote every item under kubelet-arg
  ansible.builtin.replace:
    path: "{{ rke2_config_path }}"
    regexp: '(^\s*-\s)([^"\n].*?)$'   # đầu dòng có "- ", và value CHƯA có dấu "
    replace: '\1"\2"'
    after: '^kubelet-arg:\s*$'        # giới hạn trong block kubelet-arg
    before: '^[^\s]'                  # đến trước key top-level tiếp theo
    multiline: yes                    # <-- QUAN TRỌNG
- name: Normalize 2-space indent before list items
  ansible.builtin.replace:
    path: "{{ rke2_config_path }}"
    regexp: '^\s*-\s'
    replace: '  - '
    after: '^kubelet-arg:\s*$'
    before: '^[^\s]'
    multiline: yes
