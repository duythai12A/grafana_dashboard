(
  100 *
    (sum by (volume) (longhorn_volume_actual_size_bytes))
    / clamp_min(sum by (volume) (longhorn_volume_capacity_bytes), 1)
)
* on (volume) group_left()
  max by (volume) (longhorn_volume_state == 2)                     # chỉ lấy volume đang ATTACHED (state=2)
|> label_replace(__, "persistentvolume", "$1", "volume", "(.*)")
* on (persistentvolume)
  group_left(namespace, persistentvolumeclaim, storageclass)
  max by (persistentvolume, namespace, persistentvolumeclaim, storageclass) (kube_persistentvolumeclaim_info)
> 90
