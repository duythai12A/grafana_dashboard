---
- name: Kiểm tra sự tồn tại của các file trên các máy chủ
  hosts: all
  gather_facts: no
  vars_files:
    - vars.yml

  tasks:
    - name: Kiểm tra sự tồn tại của tệp
      stat:
        path: "{{ item }}"
      with_items: "{{ files_to_check[inventory_hostname] }}"
      register: file_stat

    - name: Hiển thị kết quả kiểm tra tệp
      debug:
        msg: "IP {{ inventory_hostname }} - Tệp {{ item.item }} tồn tại: {{ item.stat.exists }}"
      with_items: "{{ file_stat.results }}"
